if("undefined"==typeof jQuery)throw new Error("jQuery is required");!function(t,e){var i=function(e){this.config={},this.options=t.extend(this.config,e||{})};Function.prototype.inherits=function(t){var e=function(){};e.prototype=t.prototype;var i=new e;for(var n in this.prototype)i[n]=this.prototype[n];this.prototype=i,this.prototype.super=t.prototype},i.prototype={},i.isMobile=!1,/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(i.isMobile=!0),e.Skeleton=i}(jQuery,window),function(t,e){var i=0,n=function(t){var n={elem:"",total:360,current:5,middlePage:5,pageSize:10,next:"下一页",prev:"上一页",first:"首页",last:"尾页",skip:!0};i++,this.config=e.extend(n,t||{}),this.elem=e(this.config.elem),this.renderPage(),this.bindEvent()};n.inherits(t),n.prototype={calculatePages:function(){var t=this.config,e=t.current,i=t.middlePage,n=t.pageSize,s=t.total,a=Math.ceil(s/n),o=0,l=0,c=[],r="page-item ",h="page-item ";return e<i?(o=1,l=i):e>=a-Math.ceil(i/2)?(o=a-i,l=a):(o=e-Math.floor(i/2),l=e+Math.floor(i/2),!(1&i)&&l--),l>a&&(l=a),o>2&&(r+=t.first?"page-edge":"",c.push('<span class="'+r+'"  key="1" >'+(t.first?t.first:1)+"</span>"),c.push('<span class="page-dot">...</span>')),this.range(o,l+1).map(function(t,i){c.push('<span   class="'+(t==e?"page-item page-curr":"page-item")+(0==i?" page-edge":"")+'" key="'+t+'">'+t+"</span>")}),l!=a&&(h+=t.last?"page-edge":"",c.push('<span  class="page-dot">...</span>'),c.push('<span class="'+h+'"  key="'+a+'">'+(t.last?t.last:a)+"</span>")),c},range:function(t,e){var i,t=t||0,n=e-t,s=Array(n);for(i=0;i<n;i++,t++)s[i]=t;return s},bindEvent:function(){var t=this,e=this.config;t.elem.on("click",".page-item",function(){var e=1*this.getAttribute("key");t.jumpPage(e)}),e.next&&t.elem.on("click",".page-next",function(){t.nextPage()}),e.prev&&t.elem.on("click",".page-prev",function(){t.prevPage()}),e.skip&&t.elem.on("click",".page-skip-btn",function(){var e=1*t.elem.find(".page-skip-input").val();!e||e>t.getPages()||t.jumpPage(e)})},prevPage:function(){this.config.current<=1||(this.config.current--,this.renderPage(),this.handleChange())},nextPage:function(){var t=this.getPages();this.config.current>=t||(this.config.current++,this.renderPage(),this.handleChange())},getPages:function(){return Math.ceil(this.config.total/this.config.pageSize)},jumpPage:function(t){t!=this.config.current&&(this.config.current=t,this.renderPage(),this.handleChange())},renderPage:function(){var t=[],e=this.config,i="page-next ",n="page-prev ",s=e.current,a=this.getPages();e.prev&&(n+=1==s?"page-disabled":"",t.push('<span  class="'+n+'">'+e.prev+"</span>")),t=t.concat(this.calculatePages()),e.next&&(i+=s==a?"page-disabled":"",t.push('<span  class="'+i+'">'+e.next+"</span>")),e.skip&&t.push(this.renderSkip()),this.elem.html(t.join(""))},renderSkip:function(){var t="";this.config;return t+='<span class="page-skip">',t+='<input type="number" min="1" class="page-skip-input"/>',t+='<button type="button" class="page-skip-btn">跳转</button>',t+="</span>",[t]},handleChange:function(){"function"==typeof this.config.onChange&&this.config.onChange.call(this,{current:this.config.current,total:this.config.total,size:this.config.pageSize})}},t.page=function(t){return new n(t)}}(Skeleton,jQuery),function(t,e){var i=0,n=9999,s=function(t){var n={content:"",shade:.1,skin:"modal",width:"400px",height:"",title:"提示",coexist:!1,ZIndex:!1,fixed:!0,button:["取消","确定"],onButton1:function(t){this.close()},onButton2:function(t){this.close()},onLoad:function(t){console.log(this,t)}};this.config=e.extend(n,t||{}),this.index=++i,this.config.coexist||this.closeAll(),this.init()};s.inherits(t),s.prototype={init:function(){var t=this.config;this.create(),this.setZIndex(),this.position(),this.bindEvent(),"function"==typeof t.onLoad&&t.onLoad.call(this,this.modal),t.shade&&this.shade.show(),this.modal.show()},create:function(){var t,i=this.config,n=i.button,s="";if(i.shade&&(s+='<div class="sk-modal-shade modal-shade-'+this.index+'" key="'+this.index+'"></div>'),s+='<div class="sk-modal sk-modal-'+this.index+" "+i.skin,i.width&&(s+='" style="width:'+i.width),i.height&&(s+=";height:"+i.height),s+='" key="'+this.index+'">',s+='<div class="modal-head">'+i.title+'<a href="javascript:;" class="modal-close"></a></div>',s+='<div class="modal-body">'+i.content+"</div>",n&&n.length>0){for(s+='<div class="modal-footer">',t=0;t<n.length;t++){var a=t+1;s+='<button type="button" class="btn modal-btn modal-btn-"'+a+'" key="'+a+'">'+n[t]+"</button>"}s+="</div>"}s+="</div>",e("body").append(e(s)),this.modal=e("body").find(".sk-modal-"+this.index),i.shade&&(this.shade=e("body").find(".modal-shade-"+this.index))},position:function(){var t=e(window).width(),i=e(window).height(),n=this.modal.outerWidth(),s=this.modal.outerHeight(),a=(t-n)/2,o=(i-s)/2;if(!this.config.fixed){var l=document.documentElement.scrollTop+document.body.scrollTop;a+=document.documentElement.scrollLeft+document.body.scrollLeft,o+=l,this.modal.css({position:"absolute"})}this.modal.css({left:a,top:o})},setZIndex:function(){this.config.shade&&this.shade.css({"z-index":n+i}),this.modal.css({"z-index":++n+i})},close:function(){var t=this,e=this.config;t.modal.addClass("fadeOutZoom"),e.shade&&t.shade.addClass("transparent"),setTimeout(function(){t.modal.remove(),e.shade&&t.shade.remove()},300),i--,n--},closeAll:function(){e(".sk-modal-shade,.sk-modal").remove(),i=0,n=9999},bindEvent:function(){var t=this,i=this.config,n=this.config.button;t.modal.on("click",".modal-head .modal-close",function(){t.close()}),n&&n.length>0&&t.modal.find(".modal-btn").click(function(){for(var e=this.getAttribute("key"),s=1;s<=n.length;s++)e==s&&"function"==typeof i["onButton"+s]&&i["onButton"+s].call(t,t.modal)}),e(window).resize(function(){t.position()})}},t.modal=function(t){return new s(t)}}(Skeleton,jQuery),function(t,e){var i=0,n=function(t){var n={elem:"",content:"",onChange:function(){}};this.config=e.extend(n,t||{}),this.index=++i,this.elem=e(this.config.elem).eq(0),this.elem.length<1||this.init()};n.inherits(t);n.prototype={init:function(){var t=this.config,i=this.getActiveItem().innerWidth();t.content&&(this.content=e(t.content)),this.elem.append('<li class="tab-slider" style="width:'+i+'px;"></li>'),this.bindEvent(),this.getActiveItem().trigger("click")},bindEvent:function(){var t=this,i=this.elem.find(".tab-slider");t.elem.find(".tab-item").click(function(){var n=e(this).index();i.width(e(this).innerWidth()).offset(e(this).offset()),e(this).addClass("active").siblings(".tab-item").removeClass("active"),t.content.length>0&&t.content.find(".content-item").eq(n).addClass("active").siblings(".content-item").removeClass("active"),"function"==typeof t.config.onChange&&t.config.onChange.call(this)})},getActiveItem:function(){var t=this,i=t.elem.find(".tab-item"),n=i.eq(0);return i.each(function(t,i){e(this).hasClass("active")&&(n=e(this))}),n}},t.tab=function(t){return new n(t)}}(Skeleton,jQuery),function(t,e){var i=0,n=function(t){var n={elem:""};this.config=e.extend(n,t||{}),this.index=++i,this.elem=e(this.config.elem),this.elem.length<1||this.init()};n.inherits(t),n.prototype={init:function(){this.bindEvent()},bindEvent:function(){var t=this;t.elem.click(function(i){var i=i||window.event;t.render(i,e(this))})},render:function(t,i){var n=this,s=n.getCoordinate(t),a=Math.max(i.innerWidth(),i.innerHeight()),o=e('<span class="sk-ripple"></span>');o.css({width:a+"px",height:a+"px"});var l=s.x-i.offset().left-o.width()/2,c=s.y-i.offset().top-o.height()/2;o.css({top:c+"px",left:l+"px"}),i.addClass("ripple-wrap").append(o),o.addClass("ripple-animate"),o.one("animationend webkitAnimationEnd oanimationend MSAnimationEnd",function(){e(this).remove()})},getCoordinate:function(t){var e=n=document.documentElement,i=document.body,n=e.scrollTop||i.scrollTop,s=e.scrollLeft||i.scrollLeft,a=e.clientTop||i.clientTop,o=e.clientLeft||i.clientLeft;return{x:t.pageX?t.pageX:t.clientX+s-o,y:t.pageY?t.pageY:t.clientY+n-a}}},t.ripple=function(t){return new n(t)}}(Skeleton,jQuery),function(t,e){var i=0,n=function(t){var n={elem:"",width:"200",height:"200",stroke:"#88b04b",strokeBg:"rgba(230, 230, 230,0.3)",onChange:function(){}};this.config=e.extend(n,t||{}),this.index=++i,this.elem=e(this.config.elem).eq(0),this.am=!0,this.elem.length<1||this.init()};n.inherits(t);var s=!1;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(s=!0),n.prototype={init:function(){var t=this.config,e=t.stroke,i=t.strokeBg,n=t.width/2,s=t.height/2,a=(Math.min(t.width,t.height)-10)/2,o=2*Math.PI*a,l='<svg id="timepickerSvg'+this.index+'" width="'+t.width+'" height="'+t.height+'">';l+='<circle class="sk-circle-bg" cx="'+n+'" cy="'+s+'" r="'+a+'" stroke="'+i+'" stroke-width="4" fill="transparent" />',l+='<circle class="sk-circle-inner" cx="'+n+'" cy="'+s+'" r="'+a+'" stroke="'+e+'" stroke-width="4" fill="transparent" stroke-dasharray="'+o+'" stroke-dashoffset="0"></circle>',l+="</svg>",l+='<div class="sk-time-text"></div>',l+='<div  class="sk-drag-wrap"><span  class="sk-drag-point"></span></div>',this.elem.css({width:t.width+"px",height:t.height+"px"}).append(l),this.dragWrap=this.elem.find(".sk-drag-wrap");var c=7/12;this.setTransition(1),this.draw(c.toFixed(2)),this.time=this.translateTime(c),this.elem.find(".sk-time-text").html(this.time),this.bindEvent()},draw:function(t){var e=this.elem.find(".sk-circle-inner");(t<0||isNaN(t))&&(t=0),t>1&&(t=1);var i=e.attr("r")*Math.PI*2,n=i*(1-t);e.css("stroke-dasharray",i),e.css("stroke-dashoffset",n),this.dragWrap.css("transform","rotate("+360*t+"deg)")},bindEvent:function(){var t=this,i=this.dragWrap,n=i.find(".sk-drag-point");s||(n.on("mousedown",function(){i.on("mousemove.timepickerdrag",t.handleDragStart.bind(t))}),e(document).on("mouseup",function(){i.off("mousemove.timepickerdrag"),t.scrollEnd()}),i.on("click",t.handleDragStart.bind(t))),n.on("touchmove",t.handleDragStart.bind(t)),n.on("touchend",t.scrollEnd),i.on("touchstart",t.handleDragStart.bind(t))},scrollStart:function(){e("body").addClass("sk-scrolling")},scrollEnd:function(){e("body").removeClass("sk-scrolling")},handleDragStart:function(t){var e,i,n,a=this,o=t||window.event,l=a.dragWrap.outerHeight()/2||110,c="click"===o.type||"touchstart"===o.type,r=document.documentElement.scrollTop||window.pageYOfset||document.body.scrollTop,h=document.documentElement.scrollLeft||window.pageXOfset||document.body.scrollLeft,d={x:a.elem.offset().left+a.elem.outerWidth()/2-h,y:a.elem.offset().top+a.elem.outerHeight()/2-r};e=s&&o.originalEvent.touches?o.originalEvent.touches.length>0?o.originalEvent.touches[0]:o.originalEvent.touches:o,!c&&s&&a.scrollStart();var f=d.x-e.clientX,u=d.y-e.clientY,g=u*u+f*f,p=l*l;c&&g<.81*p||g>1.21*p||(0===u?i=f<0?Math.PI/2:-Math.PI/2:(i=Math.atan(f/u),u>0&&f>0?i=2*Math.PI-i:u>0&&f<=0?i=-i:u<0&&(i=Math.PI-i)),n=i/(2*Math.PI),c?a.setTransition(.3):a.removeTransition(),a.draw(n),0!=a.checkZeroDirection(n,a.lastPercent)&&(a.am=!a.am),a.time=a.translateTime(n),a.elem.find(".sk-time-text").html(a.time),a.lastPercent=n)},checkZeroDirection:function(t,e){var t=t||0,e=e||0;return t>=0&&t<=.2&&e<1&&e>=.8?1:e>0&&e<=.2&&t<=1&&t>.8?-1:0},translateTime:function(t){var e=12*t,i=this.am?Math.floor(e):Math.floor(e)+12,n=Math.floor(e%1*60);return n=n<10?"0"+n:n,(i=i<10?"0"+i:i)+":"+n},removeTransition:function(){var t=this.elem.find(".sk-circle-inner");this.dragWrap.css("transition","none"),t.css("transition","none")},setTransition:function(t){var e=this.elem.find(".sk-circle-inner"),i=t||1;this.dragWrap.css("transition",i+"s ease-in-out"),e.css("transition",i+"s ease-in-out")}},t.timepicker=function(t){return new n(t)}}(Skeleton,jQuery),function(t,e){var i=function(t){this.config={elem:"",template:"",dataLeft:[],dataRight:[],key:"id",keyAttr:"data-id",init:!1},this.config=e.extend(this.config,t||{}),this.elem=e(this.config.elem),this.btnRight=null,this.btnLeft=null,this.partLeft=null,this.partRight=null,this.checkAllLeft=null,this.checkAllRight=null,this.create()};i.inherits(t);var n="js-trans-check";i.prototype={constructor:i,init:function(){var t=this.config;this.btnRight=this.elem.find(".trans-btn-right"),this.btnLeft=this.elem.find(".trans-btn-left"),this.partLeft=this.elem.find(".js-trans-left"),this.partRight=this.elem.find(".js-trans-right"),this.checkAllLeft=this.partLeft.find(".js-check-all"),this.checkAllRight=this.partRight.find(".js-check-all"),0===t.dataRight.length?this.checkAllRight.closest("label").addClass("disabled"):this.checkAllRight.closest("label").removeClass("disabled"),t.init&&this.renderLeft(),this.renderRight(),this.disableLeft(this.getValues(t.dataRight,t.key)),this.updateSelectedNum(),this.updateToBeElectedNum()},create:function(){var t='<div class="trans-left js-trans-part js-trans-left">';t+='<div class="trans-title">待选<span class="trans-num js-num-all">0</span></div>',t+='<div class="trans-content">',t+='<div class="trans-head">',t+='<label class="trans-th-check checkbox-label"><input type= "checkbox" class="js-check-all" /><span class="indicator"></span>全选</label >',t+='<span class="trans-cell">商户号</span>',t+="</div>",t+='<ul class="trans-list js-list-left"></ul>',t+="</div>",t+="</div>";var e='<div class="trans-right js-trans-part js-trans-right">';e+='<div class="trans-title">已选<span class="trans-num js-num-selected">0</span></div>',e+='<div class="trans-content">',e+='<div class="trans-head">',e+='<label class="trans-th-check checkbox-label"><input type= "checkbox" class="js-check-all" /><span class="indicator"></span>全选</label >',e+='<span class="trans-cell">商户号</span>',e+="</div>",e+='<ul class="trans-list js-list-right"></ul>',e+="</div>",e+="</div>";var i=t+'<div class="trans-middle"><div class="btn btn-right" ><</div> <div class="btn btn-left">></div></div >'+e;this.elem.append(i)},bindEvent:function(){var t=this;this.config;t.elem.on("change",".js-trans-left ."+n,function(){t.handleChange("trans-btn-left",this)}),t.elem.on("change",".js-trans-part .js-check-all",function(){t.handleCheckAll(this)}),t.elem.on("change",".js-trans-right ."+n,function(){t.handleChange("trans-btn-right",this)}),t.elem.on("click",".trans-btn-left",function(){t.transferLeft()}),t.elem.on("click",".trans-btn-right",function(){t.transferRight()})},handleChange:function(t,i){var n=this.elem.find("."+t),s=e(i).closest(".js-trans-part").find(".js-check-all"),a=e(i).closest(".trans-list");this.hasChecked(e(i).closest(".trans-list"))?n.addClass("trans-active"):n.removeClass("trans-active"),this.hasCheckedAll(a)?s.attr("checked",!0):s.attr("checked",!1)},handleCheckAll:function(t){var i=e(t).closest(".js-trans-part"),s=i.find("."+n).not("[disabled]"),a=i.hasClass("js-trans-left")?this.btnLeft:this.btnRight;s.length?e(t).attr("checked")?(a.addClass("trans-active"),s.each(function(){e(this).attr("disabled")||e(this).attr("checked",!0)})):(s.each(function(){e(this).attr("disabled")||e(this).attr("checked",!1)}),a.removeClass("trans-active")):e(t).attr("checked",!1)},transferRight:function(){var t=this,i=this.config,n=t.getCheckedKeys("js-trans-right");n.length>0&&(e.map(n,function(e,n){t.deleteItem(e,i.dataRight,i.key)}),t.renderRight(),t.updateLeft(n))},transferLeft:function(){var t=this,i=this.config,s=t.getCheckedKeys("js-trans-left"),a=this.checkAllLeft,o=this.checkAllRight;s.length>0&&(e.map(s,function(t,e){Promo.inSeries(t,i.dataRight,i.key)||i.dataRight.push(Promo.getItem(t,i.dataLeft,i.key))}),t.partLeft.find("."+n).each(function(){Promo.inArray(e(this).attr(i.keyAttr),s)&&e(this).attr("checked",!1).closest(".trans-list-item").removeClass("disabled")}),this.hasChecked(this.partLeft.find(".trans-list"))?this.btnLeft.addClass("trans-active"):this.btnLeft.removeClass("trans-active"),t.renderRight(),t.disableLeft(s)),i.dataRight.length===i.dataLeft.length&&(a.attr("checked",!1).closest("label").addClass("disabled"),this.btnLeft.removeClass("trans-active")),0!==i.dataRight.length&&o.closest("label").removeClass("disabled")},disableLeft:function(t){var i=this,s=this.config;i.elem.find(".js-list-left").find("."+n).each(function(i,n){Promo.inArray(e(this).attr(s.keyAttr),t)&&(e(this).attr("disabled",!0),e(this).closest(".trans-list-item").addClass("disabled"))})},getPartInputs:function(t){return this.elem.find("."+t).find("."+n)},updateLeft:function(t){var i=this,s=this.config,a=this.partLeft,o=a.find(".js-list-left"),l=a.find(".js-check-all");o.find("."+n).each(function(i,n){Promo.inArray(e(this).attr(s.keyAttr),t)&&(e(this).attr("disabled",!1),e(this).closest(".trans-list-item").removeClass("disabled"))}),i.hasChecked(o)?i.btnLeft.addClass("trans-active"):i.btnLeft.removeClass("trans-active"),i.hasCheckedAll(o)?(l.attr("checked",!0),i.btnLeft.addClass("trans-active")):l.attr("checked",!1)},renderLeft:function(){this.config,this.checkAllRight,this.checkAllLeft,this.elem.find(".js-list-left")},renderRight:function(){var t=this.config,e=this.checkAllRight,i=this.checkAllLeft,n=this.elem.find(".js-list-right");(0===t.dataRight.length||this.hasChecked(n))&&(e.attr("checked",!1).closest("label").addClass("disabled"),this.elem.find(".trans-btn-right").removeClass("trans-active")),t.dataRight.length!==t.dataLeft.length&&i.closest("label").removeClass("disabled"),this.updateSelectedNum()},updateSelectedNum:function(){this.elem.find(".js-num-selected").text(this.config.dataRight.length)},updateToBeElectedNum:function(){console.log(this.config.dataLeft.length),this.elem.find(".js-num-all").text(this.config.dataLeft.length)},getCheckedKeys:function(t){var i=this,s=[],a=this.config;return i.elem.find("."+t).find("."+n).each(function(t,i){var n=e(this).attr(a.keyAttr);e(this).attr("checked")&&!e(this).attr("disabled")&&s.push(n)}),s},hasChecked:function(t){var i=!1;return t.find("."+n).each(function(t,n){if(e(this).attr("checked")&&!e(this).attr("disabled"))return i=!0,!1}),i},update:function(t){var t=t||{},e=this.config;t.dataLeft&&(e.dataLeft=t.dataLeft),t.dataRight&&(e.dataRight=t.dataRight),this.init()},hasCheckedAll:function(t){var i=!0,s=t.find("."+n).not("[disabled]");return s.length>0?s.each(function(t,n){if(!e(this).attr("checked"))return i=!1,!1}):i=!1,i},deleteItem:function(t,e,i){if(e&&e.length>0)for(var n=0;n<e.length;n++)e[n][i]===t&&e.splice(n,1);return e},getValues:function(t,e){var i=[],n=t.length;if(n>0)for(var s=0;s<n;s++)i.push(t[s][e]);return i},getData:function(){return this.config.dataRight}},t.transfer=function(t){if("function"!=typeof _.template)throw new Error("transfer require underscore template");return new i(t)}}(Skeleton,jQuery),function(t,e){var i=0,n=function(t){var n={elem:"",index:""};this.config=e.extend(n,t||{}),this.elem=e(this.config.elem).eq(0),this.index=++i,this.init()};n.inherits(t);n.prototype={init:function(){this.buildTemplate(),this.bindEvent(),this.setDefaultOpt()},getDefaultOpt:function(){var t=this,i={};return this.elem.find("option").each(function(n,s){if(void 0!==e(s).attr("selected"))return i.value=s.innerHTML,void(i.index=t.selectedIndex=n)}),i},setDefaultOpt:function(){var t=this.getDefaultOpt.index;void 0!==t&&this.selectList.find(".option").eq(t).trigger("click")},buildTemplate:function(){var t=this,i=this.getDefaultOpt(),n='<div class="sk-select-list" index="'+t.index+'">',s="";t.elem.find("option").each(function(t,i){var n=e(i).html()||"";s+='<li class="option" >'+n+"</li>"}),n+='<span class="select-status"><span class="selected-text">'+i.value+'</span><i class="icon"></i></span>',n+='<ul class="options">',n+=s+"</ul></div>",t.elem.hide().after(n),t.setSelectList()},setSelectList:function(){this.selectList=this.elem.siblings(".sk-select-list")},bindEvent:function(){var t=this,i=t.elem,n=this.selectList;n.find(".select-status").on("click",function(t){var i=this,s=e("this").attr("index");e(".sk-select-list").each(function(t,i){t!=s&&e(i).removeClass("opened")}),function t(){e(document).one("click",function(s){var a=s||window.event;if(e(a.target).closest(".select-status")[0]===i)return void t();n.removeClass("opened")})}(),n.toggleClass("opened")}),n.find(".option").on("click",function(){var t=e(this).index();i.attr({"data-value":e(this).attr("data-value"),"data-text":e(this).text()}),i.find("option").eq(t).attr("selected",!0).siblings("option").removeAttr("selected"),i.trigger("change"),n.find(".option").removeClass("selected"),n.removeClass("opened").find(".selected-text").text(e(this).text()),e(this).addClass("selected")})}},t.select=function(t){return new n(t)}}(Skeleton,jQuery);